(ns {{ns}}
  (:require [korma.core :refer [defentity many-to-many select where limit insert values update delete set-fields]])
  (:import (java.util UUID)))

(defentity {{entityname-upper}})

(defn get-all-{{entityname}}s [] (select {{entityname-upper}}))

(defn get-{{entityname}}-by-uuid [uuid] (first (select {{entityname-upper}} (where {:uuid uuid}) (limit 1))))

(defn create-{{entityname}} [{{#cols}}{{colname}} {{/cols}}]
  (insert {{entityname-upper}} (values { {{#cols}}:{{colname}}  {{colname}} {{/cols}}:uuid (str (UUID/randomUUID))})))

(defn update-{{entityname}} [uuid fields]
  (update {{entityname-upper}} (set-fields fields) (where {:uuid uuid})))

(defn delete-{{entityname}} [uuid] (delete {{entityname-upper}} (where {:uuid uuid})))